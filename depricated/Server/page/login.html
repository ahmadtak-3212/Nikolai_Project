<!DOCTYPE html>
<html>
<head>
    <title>Login Form</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
    <h2>Login Page</h2><br>
    <div class="login">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <script src="./static/gridstack-jq.js"></script>
        <script src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.0.min.js"></script>
        <script src="./static/d3.v3.js"></script>
        <script src="./static/nv.d3.js"></script>

    <form id="login" method="get">
        <label><b>User Name
        </b>
        </label>
        <input type="text" name="Uname" id="Uname" placeholder="Username" value="">
        <br><br>
        <label><b>Password
        </b>
        </label>
        <input type="Password" name="Pass" id="Pass" placeholder="Password" value="">
        <br><br>

        <button type="button" value="Login"  onclick="validate()">Login</button>

        <br><br>
        <input type="checkbox" id="check">
        <span>Remember me</span>
        <br><br>
        <script type="text/javascript">
              // var jQ =jQuery.noConflict();



              function validate(){
                  // var jQ =jQuery.noConflict();
                  // jQ(document).ready(function(){
                  console.log("Page ready")

                  console.log("start");

                  // const Http = new XMLHttpRequest();
                  const call_url = "https://608dev-2.net/sandbox/sc/team73/Server/server.py?Uname=" + String(document.getElementById("Uname").value) + "&Pass=" + String(document.getElementById("Pass").value);
                  // Http.open("GET", call_url);
                  // Http.send();
                  //
                  // Http.onreadystatechange = (e) => {
                  //   console.log(Http.responseText);
                  // }

                  sessionStorage.setItem("username", String(document.getElementById("Uname").value));
                  sessionStorage.setItem("password", String(document.getElementById("Pass").value));

                  fetch(call_url)
                    .then(response => response.json())
                    .then(data => {
                        console.log("GET");
                        console.log(data);
                        // var json_data = JSON.parse(data);
                        var validated = data["valid"];
                        console.log(validated);

                        if (validated){
                            window.open("https://608dev-2.net/sandbox/sc/team73/Server/page/home.html");
                        }
                        else
                        {
                            window.open("https://608dev-2.net/sandbox/sc/team73/Server/page/fail.html");
                        }
                    });

                  // var url = "/608dev-2.net/sandbox/sc/team73/Server/server.py"//?Uname=" + String(document.getElementById("Uname").value) + "&Pass=" + String(document.getElementById("Pass").value);
                  // jQ.ajax({
                  //   type:'GET',
                  //   url: url,
                  //   data: {Uname : document.getElementById("Uname").value, Pass : document.getElementById("Pass").value},
                  //   success: function(data) {
                  //    console.log(data);
                  //   }, error: function(jqXHR, textStatus, errorThrown) {
                  //    console.log(errorThrown);
                  //   }
                  // });

                  // 608dev-2.net/sandbox/sc/team73/Server/server.py
                  // params = {Uname : document.getElementById("Uname").value, Pass : document.getElementById("Pass").value}
                  // console.log(url)
                  // window.open("https://608dev-2.net/sandbox/sc/team73/Server/page/home.html?Uname=hey");
                  // jQ.get(url, params, function(data, status){
                  //     console.log("GET");
                  //     console.log(data);
                  //     var json_data = JSON.parse(data);
                  //     var validated = json_data.valid;
                  //     console.log(validated);
                  //
                  //     if (validated){
                  //         window.open("https://608dev-2.net/sandbox/sc/team73/Server/page/home.html");
                  //     }
                  //     else
                  //     {
                  //         window.open("https://608dev-2.net/sandbox/sc/team73/Server/page/fail.html");
                  //     }
                  // });
                  console.log("missed get")

                  function load(url)
                  {
                      window.location.href = url;
                  }
                // })
                }
        </script>
        Forgot <a href="#">Password</a>
    </form>
</div>
</body>
</html>
